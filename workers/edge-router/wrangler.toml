name = "edge-router"
main = "src/index.ts"
compatibility_date = "2025-10-11"

# Routes - handles all traffic to hadoku.me
routes = [
  { pattern = "hadoku.me/*", zone_name = "hadoku.me" }
]

# Environment variables
[vars]
ROUTE_CONFIG = '{"global_priority":"12"}'  # Default, overridden by GitHub Actions
LOCAL_BASE = "https://local-api.hadoku.me"  # Tunnel host (avoid loops)
WORKER_BASE = "https://task-api.hadoku.me"
LAMBDA_BASE = ""
STATIC_ORIGIN = "https://wolffm.github.io/hadoku_site/"

# Logging configuration
REPO_OWNER = "WolffM"
REPO_NAME = "hadoku_site"
LOG_ENABLED = "true"

# Secrets (set via: wrangler secret put <NAME> or GitHub Actions)
# - GITHUB_PAT: GitHub Personal Access Token for logging to repository

# Optional: Service binding to task-api Worker (faster than HTTP)
# [[services]]
# binding = "TASK_API"
# service = "task-api"

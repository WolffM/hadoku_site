name = "contact-api"
main = "src/index.ts"
compatibility_date = "2025-01-11"
compatibility_flags = ["nodejs_compat"]

# D1 Database - Contact submissions storage
[[d1_databases]]
binding = "DB"
database_name = "contact-submissions"
database_id = "eca9e75c-3ea1-4ebe-87d7-a7ee915c24a2"

# KV Namespace - Rate limiting storage
[[kv_namespaces]]
binding = "RATE_LIMIT_KV"
id = "67a22575cb1e4ff79b65b5cf8e11729b"

# KV Namespace - Template caching (for fast runtime reads)
[[kv_namespaces]]
binding = "TEMPLATES_KV"
id = "e445c7b9dae643ac9b3b999cd85a239c"

# Cron trigger for auto-archiving old submissions (daily at 3 AM UTC)
[triggers]
crons = ["0 3 * * *"]

# Optional: Resend webhook secret for verifying inbound emails
# Set this via: wrangler secret put RESEND_WEBHOOK_SECRET
# RESEND_WEBHOOK_SECRET = "your-webhook-secret-here"

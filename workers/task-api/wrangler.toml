name = "task-api"
main = "src/index.ts"
compatibility_date = "2025-10-11"
workers_dev = true

# Build configuration
[build]
command = ""

# Tell esbuild to treat node_modules as resolvable
node_compat = true

# Routes removed - edge-router will proxy to workers.dev URL
# routes = [
#   { pattern = "task-api.hadoku.me/task/api/*", zone_name = "hadoku.me" },
#   { pattern = "task-api.hadoku.me/task/api", zone_name = "hadoku.me" }
# ]

# KV Namespaces - Task storage
[[kv_namespaces]]
binding = "TASKS_KV"
id = "6cdcc2053b224eb1819a680be8342eb3"
preview_id = "3fb96829c28b497a9101dd554c97fdec"

# Environment variables (no longer needed - using KV)
# [vars]
# REPO_OWNER = "WolffM"
# REPO_NAME = "hadoku_site"
# REPO_BRANCH = "main"

# Secrets (set via: wrangler secret put <NAME>)
# - ADMIN_KEY: Admin access key
# - FRIEND_KEY: Friend access key
